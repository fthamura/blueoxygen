/*
 * Ext JS Library 1.1
 * Copyright(c) 2006-2007, Ext JS, LLC.
 * licensing@extjs.com
 * 
 * http://www.extjs.com/license
 */


Ext.form.Field=function(_1){Ext.form.Field.superclass.constructor.call(this,_1);};Ext.extend(Ext.form.Field,Ext.BoxComponent,{invalidClass:"x-form-invalid",invalidText:"The value in this field is invalid",focusClass:"x-form-focus",validationEvent:"keyup",validateOnBlur:true,validationDelay:250,defaultAutoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off"},fieldClass:"x-form-field",msgTarget:"qtip",msgFx:"normal",readOnly:false,disabled:false,inputType:undefined,tabIndex:undefined,isFormField:true,hasFocus:false,value:undefined,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this);this.addEvents({focus:true,blur:true,specialkey:true,change:true,invalid:true,valid:true});},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:(this.hiddenName||"");},onRender:function(ct,_3){Ext.form.Field.superclass.onRender.call(this,ct,_3);if(!this.el){var _4=this.getAutoCreate();if(!_4.name){_4.name=this.name||this.id;}if(this.inputType){_4.type=this.inputType;}this.el=ct.createChild(_4,_3);}var _5=this.el.dom.type;if(_5){if(_5=="password"){_5="text";}this.el.addClass("x-form-"+_5);}if(this.readOnly){this.el.dom.readOnly=true;}if(this.tabIndex!==undefined){this.el.dom.setAttribute("tabIndex",this.tabIndex);}this.el.addClass([this.fieldClass,this.cls]);this.initValue();},applyTo:function(_6){this.allowDomMove=false;this.el=Ext.get(_6);this.render(this.el.dom.parentNode);return this;},initValue:function(){if(this.value!==undefined){this.setValue(this.value);}else{if(this.el.dom.value.length>0){this.setValue(this.el.dom.value);}}},isDirty:function(){if(this.disabled){return false;}return String(this.getValue())!==String(this.originalValue);},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this);this.initEvents();},fireKey:function(e){if(e.isNavKeyPress()){this.fireEvent("specialkey",this,e);}},reset:function(){this.setValue(this.originalValue);this.clearInvalid();},initEvents:function(){this.el.on(Ext.isIE?"keydown":"keypress",this.fireKey,this);this.el.on("focus",this.onFocus,this);this.el.on("blur",this.onBlur,this);this.originalValue=this.getValue();},onFocus:function(){if(!Ext.isOpera){this.el.addClass(this.focusClass);}this.hasFocus=true;this.startValue=this.getValue();this.fireEvent("focus",this);},beforeBlur:Ext.emptyFn,onBlur:function(){this.beforeBlur();this.el.removeClass(this.focusClass);this.hasFocus=false;if(this.validationEvent!==false&&this.validateOnBlur&&this.validationEvent!="blur"){this.validate();}var v=this.getValue();if(v!=this.startValue){this.fireEvent("change",this,v,this.startValue);}this.fireEvent("blur",this);},isValid:function(_9){if(this.disabled){return true;}var _a=this.preventMark;this.preventMark=_9===true;var v=this.validateValue(this.processValue(this.getRawValue()));this.preventMark=_a;return v;},validate:function(){if(this.disabled||this.validateValue(this.processValue(this.getRawValue()))){this.clearInvalid();return true;}return false;},processValue:function(_c){return _c;},validateValue:function(_d){return true;},markInvalid:function(_e){if(!this.rendered||this.preventMark){return;}this.el.addClass(this.invalidClass);_e=_e||this.invalidText;switch(this.msgTarget){case"qtip":this.el.dom.qtip=_e;this.el.dom.qclass="x-form-invalid-tip";if(Ext.QuickTips){Ext.QuickTips.enable();}break;case"title":this.el.dom.title=_e;break;case"under":if(!this.errorEl){var _f=this.el.findParent(".x-form-element",5,true);this.errorEl=_f.createChild({cls:"x-form-invalid-msg"});this.errorEl.setWidth(_f.getWidth(true)-20);}this.errorEl.update(_e);Ext.form.Field.msgFx[this.msgFx].show(this.errorEl,this);break;case"side":if(!this.errorIcon){var _f=this.el.findParent(".x-form-element",5,true);this.errorIcon=_f.createChild({cls:"x-form-invalid-icon"});}this.alignErrorIcon();this.errorIcon.dom.qtip=_e;this.errorIcon.dom.qclass="x-form-invalid-tip";this.errorIcon.show();this.on("resize",this.alignErrorIcon,this);break;default:var t=Ext.getDom(this.msgTarget);t.innerHTML=_e;t.style.display=this.msgDisplay;break;}this.fireEvent("invalid",this,_e);},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,"tl-tr",[2,0]);},clearInvalid:function(){if(!this.rendered||this.preventMark){return;}this.el.removeClass(this.invalidClass);switch(this.msgTarget){case"qtip":this.el.dom.qtip="";break;case"title":this.el.dom.title="";break;case"under":if(this.errorEl){Ext.form.Field.msgFx[this.msgFx].hide(this.errorEl,this);}break;case"side":if(this.errorIcon){this.errorIcon.dom.qtip="";this.errorIcon.hide();this.un("resize",this.alignErrorIcon,this);}break;default:var t=Ext.getDom(this.msgTarget);t.innerHTML="";t.style.display="none";break;}this.fireEvent("valid",this);},getRawValue:function(){var v=this.el.getValue();if(v===this.emptyText){v="";}return v;},getValue:function(){var v=this.el.getValue();if(v===this.emptyText||v===undefined){v="";}return v;},setRawValue:function(v){return this.el.dom.value=(v===null||v===undefined?"":v);},setValue:function(v){this.value=v;if(this.rendered){this.el.dom.value=(v===null||v===undefined?"":v);this.validate();}},adjustSize:function(w,h){var s=Ext.form.Field.superclass.adjustSize.call(this,w,h);s.width=this.adjustWidth(this.el.dom.tagName,s.width);return s;},adjustWidth:function(tag,w){tag=tag.toLowerCase();if(typeof w=="number"&&Ext.isStrict&&!Ext.isSafari){if(Ext.isIE&&(tag=="input"||tag=="textarea")){if(tag=="input"){return w+2;}if(tag="textarea"){return w-2;}}else{if(Ext.isOpera){if(tag=="input"){return w+2;}if(tag="textarea"){return w-2;}}}}return w;}});Ext.form.Field.msgFx={normal:{show:function(_1b,f){_1b.setDisplayed("block");},hide:function(_1d,f){_1d.setDisplayed(false).update("");}},slide:{show:function(_1f,f){_1f.slideIn("t",{stopFx:true});},hide:function(_21,f){_21.slideOut("t",{stopFx:true,useDisplay:true});}},slideRight:{show:function(_23,f){_23.fixDisplay();_23.alignTo(f.el,"tl-tr");_23.slideIn("l",{stopFx:true});},hide:function(_25,f){_25.slideOut("l",{stopFx:true,useDisplay:true});}}};